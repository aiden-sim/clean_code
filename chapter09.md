# 단위 테스트
## TDD 법칙 세 가지
- 1) 실패하는 단위 테스트를 작성할 때까지 실제 코드를 작성하지 않는다.
- 2) 컴파일은 실패하지 않으며서 실행이 실패하는 정도로만 단위 테스트를 작성한다.
- 3) 현재 실패하는 테스트를 통과할 정도로만 실제 코드를 작성한다.
- 참고) https://nesoy.github.io/articles/2017-01/TDD


## 클린 테스트 코드 유지하기
- 실제 코드가 진화하면 테스트 코드도 변해야 하는데 테스트 코드가 지저분할수록 변경하기 어려워진다.
- 테스트 코드는 실제 코드 못지않게 중요하다.

### 테스트는 -성을 제공한다.
- 테스트 케이스가 있으면 변경이 두렵지 않다.
- 실제 코드를 점검하는 자동화된 단위 테스트 수트는 설계와 아키텍처를 최대한 깨끗하게 보존하는 열쇠다.
  - 테스트 코드가 지저분하면 코드를 변경하는 능력이 떨어지며 코드 구조를 개선하는 능력도 떨어진다.
  
## 클린 테스트 코드
- 테스트 코드는 최소의 표현으로 많은 것을 나타내야 한다.
- BUILD-OPERATE-CHECK
  - GIVEN-WHEN-THEN 패턴이랑 비슷한 느낌

### 해다 분야에 밀접한 테스트 언어
- 숙련된 개발자라면 자기 코드를 좀더 간결하고 표현력이 풍부한 코드로 리팩토링해야 마땅하다.

### 이중 표준
- 테스트 코드는 단순하고, 간결하고, 표현력이 풍부해야 하지만, 실제 코드만큼 효율적일 필요는 없다.
- 실제 환경이 아니라 테스트 환경에서 돌아가는 코드기 때문이다.

## 테스트 당 assert 하나
- Junit으로 테스트 코드를 짤 때 함수마다 assert문을 하나만 사용하면 코드를 이해하기 쉽고 빠르다.
- given-when-then를 사용하면 테스트 코드가 읽기 쉬워 지지만 테스트를 분리하면 중복되는 코드가 많아진다.
  - 템플릿 메소드 패턴을 사용하면 중복을 제거할 수 있다.
  - given/when 부분을 부모 클래스에 두고 then 부분을 자식 클래스에 두면 된다.
  - 아니면 독자적인 테스트 클래스를 만들어 @Before 함수에 given/when 부분을 넣고, @Test 함수에 then 부분을 넣어도 된다.
  
### 테스트 당 개념 하나
- 개념 세 개를 함수 하나에 몰아넣으면 독자가 각 절이 거기에 존재하는 이유와 각 절이 테스트 하는 개념을 모두 이해해야 한다.
- 개념 당 assert 문수를 최소한 줄여라. 테스트 함수 하나는 개념 하나만 테스트 해라.

## F.I.R.S.T
- 클린 테스트는 다음 다섯 가지 규칙을 따른다.
- 1)빠르게(Fast) : 테스트는 빨라야 한다. 테스트를 자주 돌리지 않으면 코드 품질이 망가지기 시작한다.
- 2)독립적으로(Independent) : 각 테스트는 서로 의존하면 안 된다. 어떤 순서로 실행해도 괜찮아야 한다.
- 3)반복 가능하게(Repeatable) : 테스트는 어떤 환경에서도 반복이 가능해야 한다.
- 4)자가 검증하는(Self_Validating) : 테스트는 불(bool) 값으로 결과를 내야 한다. 성공 아니면 실패다.
- 5) 적시에(Timely) : 테스트는 적시에 작성해야 한다. 단위 테스트는 테스트하려는 실제 코드를 구현하기 직전에 구현한다. 테스트가 불가능하도록 실제 코드를 설계할지도 모른다.

## 결론
- 테스트 코드가 방치되어 망가지면 실제 코드도 망가진다. 테스트 코드를 깨끗하게 유지하자.




